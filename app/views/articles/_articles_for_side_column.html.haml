- count = ColumnSectionType.find_by_partial_name("articles_for_side_column").default_count if count.blank?
- ops = "person_id = #{@page.author_id}" if @page.author_id
- articles = @page.article_category_id.nil? ? Article.published.find(:all, :conditions => ops, :limit => count) : @page.article_category.articles.published.find(:all, :conditions => ops, :limit => count)
- @recent_articles = articles

- content_for :side_column do
  .side-column-section
    - unless @recent_articles.empty?
      %h1= section.title
      %ul.recent_articles.list_of_links
        - for article in @recent_articles
          %li
            %h2= link_to article.title, article_path(article)
            %span.date
              = "by #{article.person.name} - " if section.show_author
              = article.published_at.strftime("%a, %b %d, %Y")
            - if section.show_blurb
              %p= article.description.blank? ? truncate(h(article.blurb), :length => 100) : truncate(h(article.description), :length => 100)
            = clear
